---
title: 6장 자바스크립트와 상호작용과 디버깅
date: 2020-09-30 22:09:20
category: 웹어셈블리
tags: []
draft: true
---

## 질문

- 브라우저에서 컴파일된 코드와 상호작용하기 위해 사용하는 Module 객체의 두 함수 이름은 무엇인가?
  - Module.ccall()은 자바스크립트에서 컴파일된 C 함수를 호출하며 그 결과를 반환한다.
  - Module.cwrap()은 컴파일된 C 함수를 호출한다는 점에서 ccall()과 유사하다고 할 수 있다. 하지만 값을 반환하지 않고 언제든지 재사용할 수 있는 자바스크립트 함수를 반환한다.
- C++의 함수 이름이 변환되지 않도록 하기 위해 무엇을 해야 하는가?
  - 컴파일된 Wasm에서 이름으로 함수를 호출하려면 해당 함수를 extern 블록 안에 함수가 위치해야 한다. 그것은 각각의 조건에 대해 함수를 명시적으로 정의해야 한다는 것을 의미한다.
- EM_ASM()과 EM_JS()의 차이점은 무엇인가?
  - EM_ASM()을 이용하면 C/C++ 파일 안에 자바스크립트 코드를 삽입할 수 있으며 브라우저에서 컴파일된 코드가 실해될 때 해당 자바스크립트 코드가 실행된다. 자바스크립트 코드는 바로 실행되며 그것이 포함된 C/C++ 파일 내에서 재사용할 수 없다.
  - C/C++ 파일 내에서 재사용 가능한 함수가 필요하다면 자바스크립트 코드를 EM_JS() 블록으로 감싼 다음에 일반적인 C/C++ 함수처럼 실행시키면 된다.
- emscripten_run_script()나 EM_ASM()/EM_JS() 중에서 어느 것이 성능이 좋은가?
  - EM_ASM()/EM_JS()
  - emscripten_run_script() 함수가 C/C++에서 자바스크립트를 호출하기 위한 가장 직접적인 방법이지만 다소 느린 방법입니다.
  - 선능을 중요하게 여기는 좀 더 복잡한 경우에는 인라인 자바스크립트를 이용하는 것이 좋다.
- 함수를 C/C++ 코드 외부에서 이용하려면 코드 라인 위에 무엇을 포함해야 하는가?(힌트: EMSCRIPTEN으로 시작한다)
  - EMSCRIPTEN_KEEPALIVE
- 모듈을 인스턴스화 할 때 importObj.env 객체로 전달해야 하는 함수는 어디에서 정의할 수 있는가?
  - env 객체 내에서 함수를 정의 할 수 있다.
  - 또는 env 외부에서 함수를 정의하고 그것을 env 내에서 참조한다.
- Emscripten이 제공하는 추가 API는 무엇인가?
  - 파일시스템 API, Fetch API
- 소스 맵의 목적은 무엇인가?
  - 브라우저의 갭라 툴 내에서 원래의 형태로 코드를 볼 수 있고 디버깅을 위한 브레이크 포인트를 설정할 수 있다.
