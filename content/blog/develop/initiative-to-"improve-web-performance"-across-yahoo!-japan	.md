---
title: 야후 전사에 걸친 '웹 퍼포먼스 개선' 노력
date: 2023-02-12 17:02:22
category: develop
tags: []
draft: true
---

[링크](https://www.youtube.com/watch?v=QR6MR87kIbo)

## 1. 배경

- LCP, FID, CLS가 구글 검색에 영향을 준다.
  - UX가 더 중요해 진다.
- 같은 컨텐츠라면 쓰기 편한 것을 사용한다.

## 2. 왜 실시 했는가

- 가시화
- 지식 공유
- 서비스 개선
- 공통 플랫폼 개선

### 가시화

- Lab Data: 특정 환경에서 시험적인 데이터. 문제를 자세하게 파악하기 어렵다.
  - Lighthouse CI + Custom Dashboard
  - 타회사와의 비교 분석을 한다.
- Field Data: 실제 유저가 사용한 애플리케이션에서의 지표. 상세한 집계는 하기 어렵다.
  - Chrome UX Report Dashboard(CrUX)

#### 목표

- 양호한 점수를 유지하고 늘리는 것
- 타사 서비스 보다 우위한 점수를 얻는 것

### 지식 공유

- 개선된 것을 집계하는 사이트
- 쉽고 효율이 좋은 것을 우선 안내
  - 리소스 읽는 순서
  - 압축
  - 초기화면 레이아웃 감소
  - 메인 스레드 전용 스크립트 집중
  - 이미지와 iframe 지연 로딩
- 워킹그룹을 만들어서 그룹별로 분석 및 실시

## 전사 공통 플랫폼 개선

### 캐시 컨트롤 헤더의 최적화

- 공통 사용하는 JS, CSS를 버전 관리하고 있다면 캐시 시간을 최장으로 한다.
- document.write를 사용하지 않는다.
  - 렌더링을 블록해서 최적화를 저해한다.
- 두 종류의 광고 사이즈가 있다면 첫 번째 것은 작은 사이즈가 나오게 한다.
- 캠페인 모듈이 나오는 사람이 많아서 나오는 것을 기본으로 한다.

## 대규모 조직에서 대응 방안

- 데이터를 가시화 할 수 있다.
- 개선 할 수 있는 내용을 알 수 있다.
- 우선순위를 정해서 어디서부터 개선해 나가면 되는 것을 안다.
- 과제를 빨리 발견해서 배포 할 수 있도록 한다.
- 일시적은 프로젝트가 되면 안된다.
- 지원 없이도 자동적으로 개선할 수 있는 문화를 만든다.

### 자발적 개선을 위한 포인트

- 퍼포먼스를 기술 베이스라인을 올린다.
  - 베스트 프렉티스를 많이 안다.
- 의식을 하지 않아도 퍼포먼스 향상을 한다.
  - 최적화 되는 라이브러리를 쓰면 알아서 된다.

### 대처해 나가는 노력

- 서비스가 아무것도 하지 않아도 비즈니스 지표를 자동적 집계하여 개선의 지표와 비교하기
- BFCache: 브라우저 뒤로가기 캐시
  - 크롬도 BFCache를 지원하려고 한다.
  - unload, 캐시, 로그 최적화가 필요하다.
- 표시 스피드를 병적으로 중시하고 조직 문화로 중시하자.

## QnA

- 다른 곳에도 적용이 가능한가?
  - 공통으로 적용 가능한 것이 많다.
- 코스트가 높은 사례
  - 스크립트 분할
- 개선을 위한 모티베이션
  - 전사 프로젝트이기 때문에 가능했다.

## 느낀점

- 성능향상을 많이 신경 쓰지 못했는데 집중할 필요가 있다.
- 자동적으로 되는 것을 만드는 것도 중요한거 같다.
- 지표를 자동으로 수집하는 것이 중요해 보인다. 하지만 이를 어떻게 알릴지도 중요한거 같다. 우리도 소나큐브 같은 것을 사용해서 사후처리가 되면 잘 안 보게 되는 거 같다.
