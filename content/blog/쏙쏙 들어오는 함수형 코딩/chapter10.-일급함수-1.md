---
title: CHAPTER10. 일급함수 1
date: 2023-03-13 00:03:80
category: 쏙쏙 들어오는 함수형 코딩
tags: ['PART II 일급 추상']
draft: true
---

## 이번 장에서 살펴볼 내용

- 왜 일급 값이 좋은지 알아봅니다.
- 문법을 일급 함수로 만드는 방법에 대해 알아봅니다.
- 고차 함수로 문법을 감싸는 방법을 알아봅니다.
- 일급 함수와 고차 함수를 사용한 리팩터링 두 개를 살펴봅니다.

### 코드의 냄새: 함수 이름에 있는 암묵적 인자

- 이 코드의 냄새는 일급 값으로 바꾸면 표현력이 더 좋아집니다.
- 함수 본문에서 사용하는 어떤 값이 함수 이름에 나타난다면 `함수 이름에 있는 암묵적 인자(implicit argument in function name)`는 코드의 냄새가 됩니다.

#### 특징

1. 거의 똑같이 구현된 함수가 있다.
2. 함수 이름이 구현에 있는 다른 부분을 가리킨다.

### 리팩터링: 암묵적 인자를 드러내기

- `암묵적 인자를 드러내기(express implicit argument)` 리팩터링은 암묵적 인자가 일급 값이 되도록 함수에 인자를 추가합니다. 이렇게 하면 잠재적 중복을 업생고 코드의 목적을 더 잘 표현할 수 있습니다.

#### 단계

1. 함수 이름에 있는 암묵적 인자를 확인합니다.
2. 명시적인 인자를 추가합니다.
3. 함수 본문에 하드 코딩된 값을 새로운 인자로 바꿉니다.
4. 함수를 호출하는 곳을 고칩니다.

### 리팩터링: 함수 본문에 콜백으로 바꾸기

- `함수 본문을 콜백으로 바꾸기(replace body with callback)` 리팩터링으로 함수 본문에 어떤 부분(비슷한 함수에 있는 서로 다른 부분)을 콜백으로 바꿉니다. 이렇게 하면 일급 함수로 어떤 함수에 동작을 전달할 수 있습니다. 이 방법은 우너래 있던 코드를 고차 함수로 만든느 강력한 방법입니다.

#### 단계

1. 함수 본문에서 바꿀 부분의 앞부분과 뒷부분을 확인합니다.
2. 리팩터링 할 코드를 함수로 빼냅니다.
3. 빼낸 함수의 인자로 넘길 부분을 또 다른 함수로 빼냅니다.

## 일급인 것과 일급이 아닌 것을 구별하기

### 자바스크립트에서 일급이 아닌 것

1. 수식 연산자
2. 반복문
3. 조건문
4. try/catch 블록

### 일급으로 할 수 있는 것

1. 변수에 할당
2. 함수의 인자로 넘기기
3. 함수의 리턴값으로 받기
4. 배열이나 객체에 담기

## 객체와 배열을 너무 많이 쓰게 됩니다

- 데이터를 데이터 그대로 사용하는 것은 중요한 장점은 여러 가지 방법으로 해석할 수 있다는 것입니다.
- `데이터 지향(data orientation)`은 이벤트와 엔티티에 대한 사실을 표현하기 위해 일반 데이터 구조를 사용하는 프로그래밍 형식입니다.

## 어떤 문법이든 일급 함수로 바꿀 수 있습니다

- \+ 연산자는 변수에 할당할 수 없습니다. 하지만 \+ 연산자와 같은 함수를 만들 수 있습니다.
  - 자바스크립트에서 함수는 일급 값입니다. 함수를 통해 \+ 연산자를 일급 값으로 만들 수 있습니다.

#### 고차 함수를 만드는 방법(함수 본문에 콜백으로 바꾸기)

1. 코드를 함수로 감싸기
2. 더 일반적인 이름으로 바꾸기
3. 암묵적 인자를 드러내기
4. 함수 추출하기
5. 암묵적 인자를 드러내기

## 함수를 정의하는 방법

1. 전역으로 정의하기
2. 지역적으로 정의하기
3. 인라인으로 정의하기(익명함수)

## 왜 본문을 함수로 감싸서 넘기나요?

- 자바스크립트에서 함수는 일급이기 때문에 함수를 정의할 수 방법은 여러 가지가 있습니다.
  - 이름 붙이기, 컬렉션에 저장하기, 그냥 넘기기

```js
// 이름 붙이기
const f = function () {
  saveUser(user);
};

// 컬렉션에 저장하기
array.push(function () {
  saveUser(user);
});

// 그냥 넘기기
log(function () {
  saveUser(user);
});
```

- 어떤 문맥 안에서 실행할 수도 있습니다.
  - 선택적으로 호출하기, 나중에 호출하기, 새로운 문맥 안에서 호출하기

## 요점 정리

- 일급 값은 변수에 저장할 수 있고 인자로 전달하거나 함수의 리턴값으로 사용할 수 있습니다. 일급 값은 코드로 다룰 수 있는 값입니다.
- 언어에는 일급이 아닌 기능이 많이 있습니다. 일급이 아니 기능은 함수로 감싸 일급으로 만들 수 있습니다.
- 어떤 언어는 함술르 일급 값처럼 쓸 수 있는 일급 함수가 있습니다. 일급 함수는 어떤 단계 이상의 함수형 프로그래밍을 하는 데 필요합니다.
- 고차 함수는 다른 함수에 인자로 넘기거나 리턴값으로 받을 수 있는 함수입니다. 고차 함수로 다양한 동작을 추상화할 수 있습니다.
- `함수 이름에 있는 암묵적 인자(implicit argument in function name)`는 함수의 이름으로 구분되는 코드의 냄새입니다. 이 냄새는 코드로 다룰 수 없는 함수 이름 대신 일급 값인 인자로 바꾸는 `암묵적 인자 드러내기(express implicit argument)` 리택터링을 적용해서 없앨 수 있습니다.
- 동작을 추상화 하기 위해 `본문을 콜백으로 바꾸기(replace body with callback)` 리팩터링을 사용할 수 있습니다. 서로 다른 함수의 동작 차이를 일급 함수 인자로 만듭니다.

---

## 참고

- [쏙쏙 들어오는 함수형 코딩](https://product.kyobobook.co.kr/detail/S000001952246)
