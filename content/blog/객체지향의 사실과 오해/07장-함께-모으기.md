---
title: 07장 함께 모으기
date: 2022-03-15 00:03:87
category: 객체지향의 사실과 오해
tags: []
draft: true
---

- 마틴 파울러는 'UML Distilled 2판'에서 객체지향 설계 안에 존재하는 세 가지 상호 연관된 관점에 관해 설명합니다.
  - 개념 관점(Conceptual Perspective)에서 설계는 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현합니다. 도메인이란 사용자들이 관심을 가지고 있는 특정 분야나 주제를 말하며 소프트웨어는 도메인에 존재하는 문제를 해결하기 위해 개발됩니다. 이 관점은 사용자가 도메인을 바라보는 관점을 반영합니다. 따라서 실제 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심입니다.
  - 명세 관점(Specification Perspective)에 이르면 사용자의 영역인 도메인을 벗어나 개발자의 영역인 소프트웨어로 초점이 옮겨집니다. 명세 관점은 도메인의 개념이 아니라 실제로 소프트웨어 안에서 살아 숨쉬는 객체들의 책임에 초점을 맞추게 됩니다. 즉, 객체의 인터페이스를 바라보게 됩니다. 명세 관점에서 프로그래머는 객체가 협력을 위해 무엇을 할 수 있는가에 초점을 맞춥니다. 인터페이스와 구현을 분리하는 것은 훌륭한 객체지향 설계를 낳는 가장 기본적은 원칙입니다. '구현이 아니라 인터페이스에 대해 프로그래밍 하라'를 따르는 것은 명세 관점과 구현 관점을 명확하게 분리하는 것부터 시작됩니다.
  - 구현 관점(Implementation Perspective)은 프로그래머인 우리에게 가장 익숙한 관점으로, 실제 작업을 수행하는 코드와 연관돼 있습니다. 구현 관점의 초점은 객체들의 책임을 수행하는 데 필요한 동작하는 코드를 작성하는 것입니다. 따라서 프로그래머는 객체의 책임을 '어떻게' 수행할 것인가에 초점을 맞추며 인터페이스를 구현하는 데 필요한 속성과 메서드를 클래스에 추가합니다.
- 개념 관점, 명세 관점, 구현 관점은 동일한 클래스를 세 가지 다른 방향에서 바라보는 것을 의미합니다.
  - 클래스가 은유하는 개념은 도메인 관점을 반영합니다.
  - 클래스의 고용 인터페이스는 명세 관점을 반영합니다.
  - 클래스의 속성과 메서드는 구현 관점을 반영합니다.
- 클래스는 세 가지 관점을 모두 수용할 수 있도록 개념, 인터페이스, 구현을 함께 드러내야 합니다. 동시에 코드 안에서 세 가지 관점을 쉽게 식별할 수 있도록 깔끔하게 분리해야 합니다.
- 역할, 책임, 협력을 이용해 객체의 인터페이스를 식별했습니다. 협력에 참여하기 위해 객체가 수신해야 하는 메시지를 결정하고 메시지들이 모여 객체의 인터페이스를 구성한다는 점을 기억해야 합니다. 따라서 협력 안에서 메시지를 선택하고 메시지를 수신할 객체를 선택하는 것은 객체의 인터페이스, 즉 명세 관점에서 객체를 바라보는 것입니다.

## 설계하고 구현하기

- 객체지향 설계의 첫 번째 목표는 훌륭한 객체를 설계하는 것이 아니라 훌륭한 협력을 설계하는 것입니다. 훌륭한 객체는 훌륭한 협력을 설계할 때만 얻을 수 있습니다.
- 협력을 설계할 때는 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야 합니다. 이 말은 메시지를 먼저 선택하고 그 후에 메시지를 수신하기에 적절한 객체를 선택해야 한다는 것을 의미합니다. 이제 메시지를 수신할 객체는 메시지를 처리할 책임을 맡게 되고 객체가 수신하는 메시지는 객체가 외부에 제공하는 공용 인터페이스에 포함됩니다.

### 인터페이스 정리하기

- 각 객체를 협력이라는 문맥에서 떼어내어 수신 가능한 메시지만 추려내면 객체의 인터페이스가 됩니다. 객체가 어떤 메시지를 수신할 수 있다는 것은 그 객체의 인터페이스 안에 메시지에 해당하는 오퍼레이션이 존재한다는 것을 의미합니다.
- 객체들의 협력은 실횅 시간에 컴퓨터 안에서 일어나는 상황을 동적으로 묘사한 모델입니다. 실제로 소프트웨어의 구현은 동적인 객체가 아닌 정적인 타입을 이용해 이뤄집니다. 따라서 객체들을 포괄하는 타입을 정의한 후 식별된 오퍼레이션을 타입의 인터페이스에 추가해야 합니다.

## 코드와 세 가지 관점

### 코드는 세 가지 관점 모두 제공해야 합니다.

- 개념 관점 : 도메인을 구성하는 중요한 개념과 관계를 반영합니다. 소프트웨어 클래스가 도메인 개념의 특성을 최대한 수용하면 변경을 관리하기 쉽고 유지보수성을 향상 시킬 수 있습니다. 소프트웨어 클래스와 도메인 클래스 사이의 간격이 좁으면 좁을수록 기능을 변경하기 위해 뒤적거려야 하는 코드의 양도 점점 줄어듭니다.
- 명세 관점 : 클래스의 인터페이스를 바라봅니다. 클래스의 public 메서드는 다른 클래스가 협력할 수 있는 공용 인터페이스를 드러냅니다. 공용 인터페이스는 외부의 객체가 해당 격체에 접근할 수 있는 유일한 부분입니다. 인터페이스를 수정하묜 해당 객체와 협력하는 모든 객체에게 영향을 미칠 수밖에 없습니다. 객체의 인터페이스는 수정하기 어렵습니다. 최대한 변화에 안정적인 인터페이스를 만들기 위해서는 인터페이스를 통해 구현과 관련된 세부 사항이 드러나지 않게 해야 합니다. 변화에 탄력적인 인터페이스를 만들 수 있는 능력은 객체지향 설계자의 수준을 가늠하는 중요한 척도입니다.
- 구현 관점 : 클래스의 내부 구현을 바라봅니다. 클래스의 메서드와 속성은 구현에 속하며 공용 인터페이스의 일부가 아닙니다. 따라서 메서드의 구현과 속성의 변경은 원칙적으로 외부의 객체에게 영향을 미쳐서는 안 됩니다. 이것은 메서드와 속성이 철저하게 클래스 내부로 캡슐화돼야 한다는 것을 의미합니다. 메서드와 속성은 클래스 내부의 비밀입니다. 외부의 클래스는 자신이 협력하는 다른 클래스의 비밀 때문에 우왕좌왕해서는 안 됩니다.
- 훌륭한 객체지향 프로그래머는 하나의 클래스 안에 세 가지 관점을 몯 ㅜ포함하면서도 각 관점에 대응되는 요소를 명확하고 깔끔하게 드러낼 수 있습니다.

### 도메인 개념을 참조하는 이유

- 어떤 메시지가 있을 때 그 메시지를 수신할 객체를 선택하는 첫 번째 전략은 도메인 개념 중에서 가장 적절한 것을 선택하는 것입니다. 도메인 개념 안에서 적절한 객체를 선택하는 것은 도메인에 대한 지식을 기반으로 코드의 구조와 의미를 쉽게 유추할 수 있게 합니다. 이것은 시스템의 유지보수성에 커달한 영향을 미칩니다.
- 소프트웨어 클래스가 도메인 개념을 따르면 변화에 쉽게 대응할 수 있습니다.

### 인터페이스와 분리하라

- 명세 관점과 구현 관점을 분리하는 것은 매우 중요합니다.
- 명세 관점이 설계를 주도하면 설꼐의 품질이 향상될 수 있습니다.
- 캡슐화를 위반해서 구현을 인터페이스 밖으로 노출해서도 안 되고, 인터페이스와 구현을 명확하게 분리하지 않고 흐릿하게 섞어놓아서도 안 됩니다.

## 질문

- 객체는 뭐고 개체는 뭘까
  - 객체라는 개념은 데이터, 오퍼레이션(함수 등)등을 통틀어 소프트웨어를 구성하는 한 요소를 의미합니다. 정보를 표현하는 단위이며 실세계에 존재하는 실체를 의미합니다.
  - 개체(Entity)는 인간의 개념 또는 정보의 세계에서 의미있는 하나의 정보 단위입니다. 사물을 표현하는 단위이며 소프트웨어를 구성하는 한 요소를 의미합니다. 유일한 단일 객체가 개체라고 정의할 수 있습니다. 하지만 이는 상황에 따라 달라질 수 있습니다.
- 객체의 범위
- 인터페이스와 클래스 두 개가 함께 쓰이면 좋은경우, 어떤 경우에 뭐가 쓰여야 하는가
  - 인터페이스와 추상 클래스의 가장 큰 차이는 추상 클래스가 정의한 타입을 구현하는 클래스는 반드시 추상 클래스의 하위 클래스가 되어야 한다는 점입니다.단일 상속만 지원하는 언어의 경우 추상 클래스 방식은 새로운 타입을 정의하는 데 커다란 제약을 안게 됩니다. 반면 인터페이스가 선언한 메서드를 모두 정의하고 그 규약을 잘 지킨 클래스라면 다른 어떤 클래스를 상속했든 같은 타입으로 취급됩니다. 인터페이스는 주된 타입 외에도 특정 선택적 행위를 제공한다고 선언하는 효과를 줍니다. 인터페이스로는 계층구조가 업슨 타입 프레임워크를 만들 수 있습니다. 인터페이스는 기능을 향상시키는 안전하고 강력한 수단이 됩니다.
  - 인터페이스와 추상 골격 구현 클래스를 함께 제공하는 식으로 인터페이스와 추상 클래스의 장점을 모두 취하는 방법도 있습니다. 인터페이스로는 타입을 정의하고, 골격 구현 클래스는 나머지 메서드들까지 구현합니다. 골격 구현은 그 인터페이스로 나름의 구현을 만들려는 프로그래머의 일을 상당히 덜어줍니다. 골격 구현 클래스의 아름다움을 추상클래스처럼 구현을 도와주는 동시에, 추상 클래스로 타입을 정의할 때 따라오는 심각한 제약에서는 자유롭다는 점에 있습니다. 골격 구현 작성은 인터페이스를 잘 살펴 다른 메서드들의 구현에 사용되는 기반 메서드들을 선정합니다. 기반 메서드들을 사용해 직접 구현할 수 있는 메서드를 모두 디폴트 메서드로 제공합니다. 만약 인터페이스의 메서드 모두가 기반 메서드와 디폴트 메서드가 된다면 골격 구현 클래스를 별도로 만들 필요가 없습니다.
- 본문에서 `왜 객체의 타입을 일반적으로 구현하는게 class다` 라고 말을 했는가?

---

## 참고

- [객체지향의 사실과 오해](http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&barcode=9788998139766)
- [Effective Java 3/E - item20](https://github.com/Lokie89/effective-java/commit/86e82f71e2ee654d517df2399f99d7b14a0e04ed?branch=86e82f71e2ee654d517df2399f99d7b14a0e04ed)