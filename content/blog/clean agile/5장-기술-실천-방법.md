---
title: 5장 기술 실천 방법
date: 2024-04-30 22:04:96
category: clean agile
tags: []
draft: true
---

## 테스트 주도 개발

### 테스트 주도 개발은 복식 부기라고 할 수 있다

- 복식 부기에서는 모든 거래를 장부에 두 번씩 기록한다
- 구현해야 하는 동작을 두 번씩 입력한다. 테스트로, 그리고 한 번은 이 테스트를 통과하게 만드는 제품 코드로 말이다.
- 기능을 한 번에 하나씩만 추가한다. 실패하는 테스트 형태로 먼저 하나 추가하고, 이 테스트를 통과하게 만드는 제품 코드 형태로 다시 추가한다.

### TDD의 세 가지 규칙

- 해당 코드가 없어서 실패하는 테스트 코드를 쓰기 전에 제품 코드를 먼저 쓰면 안 된다
- 테스트 코드를 쓸 떄는 실패하도록 만들기 위해 필요한 것보다 더 많이 쓰면 안 된다. 컴파일 실패도 실패로 간주한다.
- 실패하는 테스트를 통과시키기 위해 필요한 코드보다 더 많은 제품 코드를 쓰면 안 된다.

#### 위 사항을 지키면 얻는 이점

- 누구를 고르더라도, 어느 시점에 고르더라도 아무리 길어도 1분 전까지는 모든 것이 작동했음을 보장할 수 있다

### 디버깅

- TDD를 하면 디버거를 쓸 일이 거의 없다

### 문서화

- 세 가지 규칙을 따르다 보면 만들어지는 테스트는 전체 시스템의 코드 예제가 된다.
- 테스트는 테스트하는 시스템을 설명하는 문서의 한 형태다. 프로그래머에게 완벽한 형식의 문서가 있다면, 코드 형태일 것이다. 테스트가 바로 그렇다.

### 재미

- 미리 작성하지 않고 그때그때 작성하면 테스트 한하나가 모두 도전이다. 테스트를 통과하게 만들 때마다 작은 성공을 거두는 것이다.

### 완벽함

- 테스트 통과로 얻은 정보는 테스트가 깨지지 않는다는 것 뿐이지만, 세 가지 규칙을 잘 따랐다면, 모든 제품 코드는 테스트를 통과하게 만들려고 쓴 것이며 테스트 묶음이 아주 완벽할 것이다.

#### 경고

- 테스트 커버리지는 팀의 테스트 전략을 확인하기 위해서만 사용해야 한다.
  - 목표나 목적이 되어서는 안 된다
  - 커버리지가 낮은 것을 실패로 보아서는 안 된다

### 설계

- 테스트를 먼저 쓴다면 테스트하기 힘든 함수는 쓸 수가 없다
- 테스트하기 쉽게 유지하려면 겹할을 끊고 분리하면 된다

### 용기

- 시스템 설계를 건강하게 유지할 수 있다
  - 완벽한 테스트 묶음이 있으면 코드를 고치는 두려움이 사라진다. 코드를 정리하는 두렴움이 사라진다.

## 리팩터링

- 리팩터링은 코드의 구조를 개선하면서 동작은 바꾸지 않는 실천 방법이다.
- 무언가 깨 먹지 않았다는 확신을 얻을 수 있는 테스트 묶음이 필요하다.
- 리팩터링 과정에서 하는 일은 사소하게는 코드를 조금 더 보기 좋게 만드는 것부터 근본적인 구조 변경까지 다양하다.
- 코드를 쓰는 것과 코드를 정리하는 것을 동시에 다루는 것은 어렵다. 일단 작동하면, 테스트는 통과했을 것이고, 이제 그동안 만든 지저분한 것들을 정리하자.
- 리팩터링은 일상적인 작업의 일부일 뿐이다.
  - 리팩터링이라는 단어가 일정에 나타나서는 안 된다. 리팩터링은 계획을 잡고 하는 활동이 아니다. 리팩터링할 시간을 따로 할당해서도 안 된다.

## 단순한 설계

- 단순한 설계 실천 방법은 리팩터링의 목표 중 하나다.
- 단순한 설계는 최대한 단순하고, 표현력이 뛰어난 구조를 바탕으로 최소한의 코드만 작성하는 실천 방법이다.

### 켄트 벡이 세운 단순한 설계의 규칙

1. 모든 테스트를 통과할 것
2. 의도를 드러낼 것
3. 중복을 없앨 것
4. 구성 요소를 줄일 것

- 규칙의 순서는 실행하는 순서이면서 동시에 중요한 순서이기도 하다.

### 설계 무게

- 설계가 복작해질수록 프로그래머가 느끼는 인지 부하는 늘어난다
- 설계의 복잡도와 기능의 복잡도 사이에서 균형을 잡는 것이 단순한 설계의 목표다

## 짝 프로그래밍

- 짝 프로그래밍은 잠깐식 하는 것이다

### 짝 프로그래밍이란 무엇인가?

- 짝 프로그래밍은 프로그래밍 문제 하나를 두 사람이 함께 해결하는 행위다
- 짝이 스토리를 담당하지는 않는다. 짝이 아니라 프로그래머 한 명 한 명이 스토리를 완성할 책임을 져야 한다. 일반적으로 스토리를 완성하는 데 걸리는 시간이 짝 프로그래밍 길이보다 훨씬 길다.
- 짝 프로그래밍의 목표는 지식을 모으는 것이 아니라 퍼트리고 교환하는 것이다

### 짝 프로그래밍을 하는 이유

- 우리는 팀이 되기 위해서 짝 프로그래밍을 한다
- 짝 프로그래밍은 구성원끼리 지식을 공유하고, 지식의 칸만이가 생기지 않게 만드는 단연코 최고의 방법이다. 팀에 빠지면 안 되는 사람이 생기지 않게 만드는 최고의 방법이다.
- 어떤 문제든 눈이 둘 넘게 있는 편이 확실히 더 낫다

### 짝 프로그래밍을 통한 코드 리뷰

- 짝 프로그래밍에서 이루어지는 리뷰는 앞으로 코드를 어떻게 바꾸어 가야 할지를 생각하며 현재 코드의 상태를 검토하게 된다

### 비용은?

- 짝 프로그래밍의 비용을 측정하기는 어렵다.
- 짝 프로그래밍으로 코드 리뷰를 대체할 수 있다면, 결과적으로 생산성 감소는 전혀 없을 가능성이 크다
- 나의 경험과 다른 사람들의 경험을 종합해 보면, 형식에 구애받지 않고 프로그래머 재량으로 이루어지는 짝 프로그래밍은 팀 전체에 꽤 도움이 된다

### 둘이서만?

- 셋 이상이 하는 짝 프로그래밍을 '몹 프로그래밍'이라고 부른다

### 관리자

- 짝 프로그래밍 해도 되는지 허락받지 말라. 당신은 전문가다. 당신이 결장하라.

## 결론

- 기술 실천 방법 없이 애자일을 도입하려는 시도는 실패할 수밖에 없다.
- 기술적인 품질을 높게 유지하는 기술 실천 방법이 없다면, 생산성이 빠르게 추락하여 헤어날수 없는 죽음의 소용돌이 속으로 빠지고 말 것이다.
