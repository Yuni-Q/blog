---
title: CHAPTER3. 액션과 계산, 데이터의 차이를 알기
date: 2023-02-17 00:02:15
category: 쏙쏙 들어오는 함수형 코딩
tags: ['PART I 액션과 계산, 데이터']
draft: true
---

## 이번 장에서 살펴볼 내용

- 액션과 계산, 데이터가 어떻게 다른지 배읍니다.
- 문제에 대해 생각하거나 코드를 작성할 때 또는 코드를 읽을 때 액션과 계산, 데이터를 구분해서 적용해 봅니다.
- 액션이 코드 전체로 퍼질 수 있다는 것을 이해합니다.
- 이미 있는 코드에서 어떤 부분이 액션인지 찾아봅니다.

## 액션과 계산, 데이터

### 액션

- 실행 시점과 횟수에 의존합니다
- 다른 말로 부수 효과(side-effects), 부수 효과가 있는 함수(side-effecting function), 순수하지 않은 함수(impure function)라고 부르기도 합니다.
- ex. 이메일 보내기, 데이터베이스 읽기

### 계산

- 입력으로 출력을 계산합니다.
- 다른 말로 순수 함수(pure function), 수학 할수(mathematical function)라고 부르기도 합니다.
- ex. 최댓값 찾기, 이메일 주소가 올바른지 확인하기

### 데이터

- 이벤트에 대한 사실
- ex. 사용자가 입력한 이메일 주소, 은행 API로 읽은 달러 수량

### 1. 문제에 대해 생각할 때

- 아직 코딩을 시작하기 전이고 문제에 대해서 고민하고 있을 때도 문제를 액션과 계산, 데이터로 나눠 생각해 볼 수 있습니다.
- 문제를 액션과 계산, 데이터로 나눠보면 코드를 작성할 때 특별히 주의해야 할 부분(액션)과 데이터로 처리해야 할 부분, 결정을 내려야 하는 부분(계산)을 명확히 알 수 있습니다

### 2. 코딩할 때

- 코딩을 할 때도 액션과 계산, 데이터를 구분할 수 있습니다. 함수형 프로그래머는 최대한 액션에서 계산을 빼내려고 합니다. 또 계산에서는 데이터를 분리할 수 있는지 생각합니다. 더 나아가 액션이 계산이 될 수 있는지, 계산은 데이터가 될 수 있는지 고민합니다.

### 3. 코드를 읽을 때

- 코드를 읽을 때 액션과 계산, 데이터 중 어떤 것에 속하는지 잘 살펴봐야 합니다. 특히 액션은 시간에 의존하기 때문에 더 조심해야 합니다. 그래서 언제나 숨어있는 액션까지도 찾아야 합니다. 대부분의 함수형 프로그래머는 더 좋은 코드를 만들기 위해 이미 있는 코드를 액션과 계산, 데이터로 리팩터링 하는 방법을 찾을 것입니다.

## 장보기 과정에서 배운 것

- 액선과 계산, 데이터는 어디에나 적용할 수 있습니다.
- 액션 안에는 계산과 데이터, 또 다른 액션이 숨어 있을지도 모릅니다.
- 계산은 더 작은 계산과 데이터로 나누고 연결할 수 있습니다.
- 데이터는 데이터만 조합할 수 있습니다.
- 계산은 때로 '우리 머릿속에서' 일어납니다.

## 데이터에 대해 자세히 알아보기

- 데이터는 이벤트에 대한 사실입니다.
- 역설적으로 데이터는 데이터 자체로 할 수 있는 것이 없기 때문에 좋습니다. 그래서 데이터는 데이터 그대로 이해할 수 있습니다.
- 함수형 프로그래머는 불변 데이터 구조를 만 들기 위해 두 가지 원칙을 사용합니다.
  - 카피-온-라이트(copy-on-write). 변경할 때 복사본을 만듭니다.
  - 방어적 복사(defensive copy). 보관하려고 하는 데이터의 복사본을 만듭니다.

### 데이터의 장점

- 직렬화
- 동일성 비교
- 자유로운 해석

### 데이터의 단점

- 유연하게 해석할 수 있다는 점은 장점이지만, 해석이 반드시 필요하다는 점은 단점입니다. 계산은 해석하지 않아도 실행할 수 있습니다. 하지만 해석하지 않은 데이터는 쓸모없는 바 이트일 뿐입니다.

## 새로 만드는 코드에 함수형 사고 적용하기

## 계산에 대해 자세히 알아 보기

- 계산은 입력값으로 출력값을 만드는 것입니다. 실행시점과 횟수에 관계없이 항상 같은 입력값에 대해 같은 출력값을 돌려줍니다.
- 계산에는 연산을 담을 수 있습니다. 계산은 입력값을 출력값으로 만드는 것을 표현합니다. 계산을 언제 사용할지 또는 어떻게 사용 할지는 때에 따라 다릅니다.
- 테스트하기 쉽습니다. 계산은 언제 어디서나 원하는 만큼 태스트를 실행할 수 있습니다.
- 기계적인 분석이 쉽습니다. 학술 연구에 정적 분석이라는 것이 있습니다. 정적 분석에서 자동화된 분석은 중요합니다.
- 계산은 조합하기 좋습니다. 계산을 조합해 더 큰 계산을 만들 수 있습니다. 이때 일급(high-order) 계산을 사용하는데 14장에서 살펴보겠습니다.
- 함수형 프로그래밍의 대부분은 계산을 가지고 하는 일입니다. 계산은 일반적으로 함수형 프로그래밍 외부에 있는 액션을 통해 수행됩니다.

### 계산을 쓰면서 걱정하지 않아도 되는 것들입니다.

1. 동시에 실행되는것
2. 과거에 실행되었던 것이나 미래에 실행할 것
3. 실행 횟수

### 계산의 단접

- 계산과 액션은 실행하기 전에 어떤 일이 발생 할지 알 수 없다는 단점이 있습니다.
- 이런 단점이 싫다면 계산이나 액션 대신 데이터를 사용해야 합니다.

## 이미 있는 코드에 함수형 사고 적용하기

## 액션은 코드 전체로 퍼집니다.

- 액션을 부르는 함수가 있다면 그 함수도 액션이 됩니다. 또 그 함수를 부르는 다른 함수도 역시 액션이 됩니다. 이런 식으로 작은 액션 하나가 코드 전체로 퍼져 나갑니다.

## 액션은 다양한 형태로 나타납니다

## 액션에 대해 자세히 알아보기

- 액션은 외부 세계에 영향을 주거나 받는 것을 말합니다. 그리고 액션은 실행 시점과 횟수에 의존합니다.
  - 언제 실행되는지 - 순서
  - 얼마나 실행되는지 - 반복
- 액션으로 외부 세상에 영향을 줄 수 있습니다. 따라서 어떤 일을 하려는지 아는 것이 중요합니다.
- 액션은 함수헝 프로그래밍에서 가장 중요합니다. 앞으로 몇 장에 걸쳐 액션을 제한적으로 사용하는 법에 대해 다루겠습니다.

### 액션을 잘 사용하기 위한 방법

- 가능한 액션을 적게 사용합니다. 액션을 전혀 쓰지 않을 수 없습니다. 액션 대신 계산을 사용할 수 있는지 생각해 봐야 합니다. 15장에서 이 내용을 다루겠습니다.
- 액션은 가능한 작게 만듭니다. 액션에서 액션과 관련 없는 코드는 모두 제거합니다. 예를 들어, 액션에서 결정이나 계획과 관련된 부분은 계산으로 빼낼 수 있습니다. 이 내용은 다음 장에서 자세히 알아보 겠습니다.
- 액션이 외부 세계와 상호작용하는 것을 제한할 수 있습나다. 액션은 외부 세계에 영향을 주거나 받을 수 있습니다. 내부에 계산과 데이터만 있고 가장 바깥쪽에 액션이 있는 구조가 이상적입니다 관련된 내용은 18장에서 어니언 아키텍처(onion architecture)를 다룰 때 살펴보겠습니다.
- 액션이 호출 시점에 의존하는 것을 제한합니다. 함수형 프로그래머는 액션이 호출 시점과 횟수에 덜 의존하도록 만드는 기술을 알고 있습니다. 그래서 액션을 사용할 때 조금 더 쉽게 사용할 수 있습니다.

## 결론

- 계산은 계획이나 결정을 할때 적용했고 데이터는 계획하거나 결정한 결과였습니다. 마지막으로 액션을 통해 계산으로 만든 계획을 실행 할 수 있었습니다.

## 요점 정리

- 함수형 프로그래머는 액션과 계산, 데이터를 구분합니다. 함수형 프로그래머가 하는 것처럼 액션과 계산, 데이터를 구분하는 첫 번째 기술을 배웠습니다.
- 액션은 실행 시점이나 횟수에 의존합니다. 일반적으로 액션은 외부 세계에 영향을 주거나 받습니다.
- 계산은 입력값으로 출력값을 만드는 것입니다. 외부 세계에 영향을 주거나 받지 않고 실행 시점이나 횟수에 의존하지 않습니다.
- 데이터는 이벤트에 대한 사실입니다. 사실은 변하지 않기 때문에 영구적으로 기록 할 수 있습니다
- 함수형 프로그래머는 액션보다 계산을 좋아하고 계산보다 데이터를 좋아합니다.
- 계산은 같은 입력값을 주면 항상 같은 출력값이 나오기 때문에 액션보다 테스트하기 쉽습니다.

---

## 참고

- [쏙쏙 들어오는 함수형 코딩](https://product.kyobobook.co.kr/detail/S000001952246)
