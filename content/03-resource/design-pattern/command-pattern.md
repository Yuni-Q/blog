---
title: command pattern
date: 2021-01-26 01:01:10
category: design pattern
tags: [design pattern]
draft: false
marp: true
---

## ê°ì²´ì˜ í–‰ìœ„ë¥¼ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ ìº¡ìŠí™” í•˜ëŠ” íŒ¨í„´

---

## ì»¤ë§¨ë“œ íŒ¨í„´ì€ í–‰ìœ„ì— ëŒ€í•œ íŒ¨í„´ì…ë‹ˆë‹¤.

- í´ë˜ìŠ¤ì™€ ê°ì²´ë“¤ì´ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²• ë° ì—­í• ì„ ë¶„ë‹´í•˜ëŠ” ë°©ë²•ê³¼ ê´€ë ¨ëœ íŒ¨í„´ì…ë‹ˆë‹¤.
- í•œ ê°ì²´ê°€ í˜¼ì ìˆ˜í–‰í•  ìˆ˜ ì—†ëŠ” ì‘ì—…ì„ ì—¬ëŸ¬ ê°œì˜ ê°ì²´ë¡œ ì–´ë–»ê²Œ `ë¶„ë°°`í•˜ëŠ”ì§€, ë˜ ê·¸ë ‡ê²Œ í•˜ë©´ì„œë„ ê°ì²´ ì‚¬ì´ì˜ `ê²°í•©ë„ë¥¼ ìµœì†Œí™”`í•˜ëŠ” ê²ƒì— ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤.
- í…œí”Œë¦¿ ë©”ì†Œë“œ, ì¸í„°í”„ë¦¬í„°, ì—­í•  ë³€ê²½, ë¹„ì§€í„°, `ì»¤ë§¨ë“œ`, ìŠ¤íŠ¸ë˜í‹°ì§€, ë¯¸ë””ì—ì´í„°, ì´í„°ë ˆì´í„°, ë©”ë©˜í† , ì˜µì €ë²„, ìŠ¤í…Œì´íŠ¸ ë“±ì´ ìˆìŠµë‹ˆë‹¤.

---

## ì»¤ë§¨ë“œ íŒ¨í„´ì„ ë¶€ë¥´ëŠ” ë‹¤ì–‘í•œ ëª…ì¹­

- ì»¤ë§¨ë“œ íŒ¨í„´
- ëª…ë ¹ íŒ¨í„´
- ì‘ë™(Action) íŒ¨í„´
- íŠ¸ëœì­ì…˜(Transaction) íŒ¨í„´

---

## ì»¤ë§¨ë“œ íŒ¨í„´ì´ë€?

- ì»¤ë§¨ë“œ íŒ¨í„´(Command pattern)ì´ë€ `ìš”ì²­ì„ ê°ì²´ì˜ í˜•íƒœë¡œ ìº¡ìŠí™”`í•˜ì—¬ ì‚¬ìš©ìê°€ ë³´ë‚¸ ìš”ì²­ì„ ë‚˜ì¤‘ì— ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ë§¤ì„œë“œ ì´ë¦„, `ë§¤ê°œë³€ìˆ˜` ë“± ìš”ì²­ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì €ì¥ ë˜ëŠ” ë¡œê¹…, ì·¨ì†Œí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
  - ê°€ì¥ ì£¼ì˜ ê¹Šê²Œ ë³¼ ì‚¬í•­ì€ ì»¤ë§¨ë“œ ìì²´ë¥¼ `ê°ì²´í™”`í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.
  - `ì¬ì‚¬ìš©ì„±`ì´ ë†’ì€ í´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•˜ëŠ” íŒ¨í„´ì„ ë§í•©ë‹ˆë‹¤.
  - ìš”ì²­ ìì²´ë¥¼ `ìº¡ìŠí™”`í•©ë‹ˆë‹¤.
  - ì ˆì°¨ì§€í–¥ í”„ë¡œê·¸ë¨ì—ì„œëŠ” ì´ë¥¼ `ì½œë°± í•¨ìˆ˜`, ì¦‰ ì–´ë”˜ê°€ ë“±ë¡ë˜ì—ˆë‹¤ê°€ ë‚˜ì¤‘ì— í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ì´ëŸ¬í•œ `ë§¤ê°œë³€ìˆ˜í™”`ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª…ë ¹ íŒ¨í„´ì€ `ì½œë°±ì„ ê°ì²´ì§€í–¥ ë°©ì‹`ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒì…ë‹ˆë‹¤.
- ì´ íŒ¨í„´ì˜ í•µì‹¬ì€ `Command ì¸í„°í˜ì´ìŠ¤`ì…ë‹ˆë‹¤.

---

## ì»¤ë§¨ë“œ íŒ¨í„´ ë“¤ì—¬ë‹¤ ë³´ê¸°

- ì‹¤í–‰ë  ê¸°ëŠ¥ì„ ìº¡ìŠí™”í•¨ìœ¼ë¡œì¨ `ê¸°ëŠ¥ì˜ ì‹¤í–‰ì„ ìš”êµ¬í•˜ëŠ” í˜¸ì¶œì(Invoker)` í´ë˜ìŠ¤ì™€ `ì‹¤ì œ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ìˆ˜ì‹ ì(Receiver)` í´ë˜ìŠ¤ ì‚¬ì´ì˜ `ì˜ì¡´ì„±ì„ ì œê±°`í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì‹¤í–‰ë  ê¸°ëŠ¥ì˜ ë³€ê²½ì—ë„ `í˜¸ì¶œì í´ë˜ìŠ¤ë¥¼ ìˆ˜ì • ì—†ì´` ê·¸ëŒ€ë¡œ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì´ë ‡ê²Œ í•˜ê¸° ìœ„í•´ í–‰ë™ê³¼ ë¦¬ì‹œë²„ë¥¼ í•œ ê°ì²´ì— ì§‘ì–´ë„£ê³  ë©”ì†Œë“œ í•˜ë‚˜ë§Œ ì™¸ë¶€ì— ê³µê°œí•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
  - ë³´í†µ OOPì—ì„œëŠ” ì£¼ì²´ ê°ì²´ì™€ ëŒ€ìƒ ê°ì²´ê°€ ì¡´ì¬í•˜ê³ , ëŒ€ìƒ ê°ì²´ì— ëŒ€í•œ ì•¡ì…˜ì€ ì£¼ì²´ ê°ì²´ì—ì„œì˜ ë©”ì˜ë“œë¡œ ì²˜ë¦¬í•˜ëŠ”ë°, ì´ `ì•¡ì…˜ê¹Œì§€ ê°ì²´`ë¡œ ë§Œë“  ë’¤ì— ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

## ê°œë°©-íì‡„ ì›ì¹™(OCP, Open-Closed Principle)

- ëª…ë ¹ì–´ë¥¼ ì¸ë³´ì»¤ì— ì–¸ì œë“ ì§€ ë“±ë¡í•  ìˆ˜ ìˆê³ , ì›í•˜ëŠ” ì–¸ì œë“ ì§€ ì¸ë³´ì»¤ë¡œ ê°„ë‹¨í•˜ê²Œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”í›„ ëª…ë ¹ì´ë‚˜ ë¦¬ì‹œë²„ê°€ ë” ì¶”ê°€ë  ê²½ìš° ê¸°ì¡´ ì½”ë“œì— ìˆ˜ì • ì—†ì´, ë‘ ê°ì²´ë¥¼ ë§Œë“¤ê³  setCommand() ë¡œ ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤. ì¦‰, `OCP ì›ì¹™`ì„ ì˜ ì§€ì¼œëƒ…ë‹ˆë‹¤.

---

## ì»¤ë§¨ë“œ íŒ¨í„´ì˜ í™•ì¥

- `ë©”íƒ€ ì»¤ë§¨ë“œ` íŒ¨í„´ì„ ì´ìš©í•˜ê²Œë˜ë©´ ëª…ë ¹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ë©”í¬ë¡œë¥¼ ë§Œë“¤ì–´ì„œ ì—¬ëŸ¬ ëª…ë ¹ì„ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- `ë©”í¬ë¡œ ì»¤ë§¨ë“œ`ëŠ” ì»¤ë§¨ë“œë¥¼ í™•ì¥í•´ì„œ ì—¬ëŸ¬ ê°œì˜ ì»¤ë§¨ë“œë¥¼ í•œêº¼ë²ˆì— í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•´ ì£¼ëŠ” ê°„ë‹¨í•œ ë°©ë²•ì…ë‹ˆë‹¤. ë§¤í¬ë¡œ ì»¤ë§¨ë“œì—ì„œë„ ì–´ë µì§€ ì•Šê²Œ ì‘ì—…ì·¨ì†Œ ê¸°ëŠ¥ì„ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í”„ë¡œê·¸ë˜ë°ì„ í•˜ë‹¤ ë³´ë©´ ìš”ì²­ ìì²´ë¥¼ ë¦¬ì‹œë²„í•œí…Œ ë„˜ê¸°ì§€ ì•Šê³  ìê¸°ê°€ ì²˜ë¦¬í•˜ëŠ” `ìŠ¤ë§ˆíŠ¸ ì»¤ë§¨ë“œ` ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ì¢…ì¢… ìˆìŠµë‹ˆë‹¤.

---

## ì¥ì 

- ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´(ë¦¬ì‹œë²„)ì™€ ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” ê°ì²´ë¥¼ ë¶„ë¦¬í•˜ê¸° ë•Œë¬¸ì— `SRP ì›ì¹™(ë‹¨ì¼ ì±…ì„ ì›ì¹™)`ì„ ì˜ ì§€í‚µë‹ˆë‹¤.
- `ì´ë²¤íŠ¸`ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰ë  ê¸°ëŠ¥ì´ ë‹¤ì–‘í•˜ë©´ì„œë„ `ë³€ê²½`ì´ í•„ìš”í•œ ê²½ìš°ì— ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  `ì¬ì‚¬ìš©`í•˜ê³ ì í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
- ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ì´ ìƒˆë¡œìš´ ë¦¬ì‹œë²„, ëª…ë ¹ì–´ ì¶”ê°€ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— `OCP ì›ì¹™(ê°œë°© íì‡„ ì›ì¹™)`ì„ ì˜ ì§€í‚µë‹ˆë‹¤.
- ì»¤ë§¨ë“œ ë‹¨ìœ„ì˜ ë³„ë„ì˜ ì•¡ì…˜(undo, redo) ë“±ì´ ê°€ëŠ¥í•˜ê³ , ì»¤ë§¨ë“œ ìƒì† ë° ì¡°í•©ì„ í†µí•´ ë” ì •êµí•œ ì»¤ë§¨ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ë‹¨ì 

- ì „ì²´ì ìœ¼ë¡œ ì´í•´ê°€ í•„ìš”í•˜ê³  ë³µì¡í•œ ì„¤ê³„êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

---

## í™œìš© ìƒí™©

- ì»¤ë§¨ë“œ ë°œìƒ ì‹œì ì„ ì‚¬ìš©ìê°€ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•´ì•¼ í•˜ëŠ” ê²½ìš°
  - ì„œë¡œ ë‹¤ë¥¸ ì‹œê°„ì— ìš”ì²­ì„ ëª…ì‹œí•˜ê³ , ì €ì¥í•˜ë©°, ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- ì—¬ëŸ¬ ì»¤ë§¨ë“œë¥¼ ì¡°í•©í•˜ì—¬ í•˜ë‚˜ì˜ ì»¤ë§¨ë“œì²˜ëŸ¼ ì‚¬ìš©í•  í•„ìš”ê°€ ìˆëŠ” ê²½ìš°
- ì»¤ë§¨ë“œ ì‹¤í–‰ ì·¨ì†Œ, ì¬ ì‹¤í–‰ ë“±ì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê²½ìš°
  - ì—°ì‚°ì˜ ë°˜ë³µ ì‚¬ìš©ì„ í†µí•´ ìˆ˜í–‰ê³¼ ì·¨ì†Œë¥¼ ë¬´í•œ ë°˜ë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìˆ˜í–‰í•  ë™ì‘ì„ ê°ì²´ë¡œ ë§¤ê°œë³€ìˆ˜í™”í•˜ê³ ì í•˜ëŠ” ê²½ìš°
- ê¸°ë³¸ì ì¸ ì—°ì‚°ì˜ ì¡°í•©ìœ¼ë¡œ ë§Œë“  ìƒìœ„ ìˆ˜ì¤€ ì—°ì‚°ì„ ì¨ì„œ ì‹œìŠ¤í…œì„ êµ¬ì¡°í™”í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## Command íŒ¨í„´ ì‚¬ìš© ë°©ë²•

- ì»¤ë§¨ë“œ íŒ¨í„´ì—ëŠ” `ëª…ë ¹(command)`, `ìˆ˜ì‹ ì(receiver)`, `ë°œë™ì(invoker)`, `í´ë¼ì´ì–¸íŠ¸(client)`ì˜ ë„¤ê°œì˜ ìš©ì–´ê°€ ìˆìŠµë‹ˆë‹¤.
- Command ì¸í„°í˜ì´ìŠ¤ì™€ ConcreteCommand êµ¬í˜„ì²´ë§Œ ìˆì–´ë„ ì»¤ë§¨ë“œ íŒ¨í„´ì„ ì‚¬ìš©í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ Receiverë¥¼ ì´ìš©í•´ ì‹¤ì œ ëª…ë ¹ì˜ ì‹¤í–‰ ì½”ë“œì™€ ê°œë…ì ì¸ ëª…ë ¹ì„ ë¶„ë¦¬í•˜ê³ , Invokerë¥¼ ì´ìš©í•´ ëª…ë ¹ì˜ ì‹¤ì œ ì‹¤í–‰ì„ Clientì™€ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
- ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´, ì¥êµ°ì´(client)ì´ ì „ëµ(invoker)ì„ í†µí•˜ì—¬ ëª…ë ¹(command)ë¥¼ ë‚´ë ¤ ëª…ë ¹ì„ ìˆ˜í–‰(Receiver)í•˜ê²Œ ë©ë‹ˆë‹¤.

---

## ì‹ë‹¹ ì£¼ë¬¸ ì‹œìŠ¤í…œì— ë¹„ìœ í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

- ì–´ë–¤ ì‹ë‹¹ì—ëŠ” ì£¼ë°©ì¥ê³¼ ì›¨ì´í„°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ ì‹ë‹¹ì— ì–´ë–¤ ì†ë‹˜ì´ ë“¤ì–´ì™€, ì£¼ë¬¸ì„œì— ìŠ¤íŒŒê²Œí‹°ë¥¼ ì‘ì„±í•˜ê³  ì´ë¥¼ ì›¨ì´í„°ì—ê²Œ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. ì›¨ì´í„°ëŠ” ì´ ì£¼ë¬¸ì„œë¥¼ ì½ê³  ì£¼ë°©ì¥ì—ê²Œ ìŠ¤íŒŒê²Œí‹° ìš”ë¦¬ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
- ì†ë‹˜ : Client
- ì›¨ì´í„° : Invoker ê°ì²´
- ì£¼ë¬¸ì„ ë°›ëŠ” ê²ƒ : setCommand()
- ì£¼ë¬¸ì„œ : Command ê°ì²´
- ì£¼ë¬¸ì„ ì£¼ë°©ì¥ì—ê²Œ ì „ë‹¬í•˜ì—¬ ìš”ë¦¬ë¥¼ ìš”ì²­ í•˜ëŠ” ê²ƒ : execute()
- ì£¼ë°©ì¥: Receiver ê°ì²´

---

### Client

- ë§ ê·¸ëŒ€ë¡œ ëª…ë ¹ì„ ë‚´ë¦´ `ì‚¬ìš©ì`ì…ë‹ˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ëŠ” ConcreteCommandë¥¼ ìƒì„±í•˜ê³  Receiverë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
- ëˆ„ê°€(Receiver) ë¬´ì—‡(Command)ì„ í• ì§€ì— ëŒ€í•´ì„œë§Œ ì•Œê³  ìˆìŠµë‹ˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” `ë°œë™ì ê°ì²´`ì™€ `í•˜ë‚˜ ì´ìƒì˜ ì»¤ë§¨ë“œ ê°ì²´`ë¥¼ ë³´ìœ í•©ë‹ˆë‹¤.
  - ëª…ë ¹ì„ ìˆ˜í–‰í•˜ë ¤ë©´, í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ë°œë™ì ê°ì²´ë¡œ ì»¤ë§¨ë“œ ê°ì²´ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì–´ëŠ ì‹œì ì—ì„œ ì–´ë–¤ ëª…ë ¹ì„ ìˆ˜í–‰í• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

---

## Receiver

- ë¦¬ì‹œë²„ëŠ” ìš”êµ¬ ì‚¬í•­ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì–´ë–¤ ì¼ì„ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ”ì§€ ì•Œê³  ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤.
- ì‹¤ì œë¡œ Clientì˜ ì›í•˜ëŠ” ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.
- ëˆ„ê°€ ì–¸ì œ ìš”ì²­í•´ì™”ëŠ”ì§€ ëª¨ë¦…ë‹ˆë‹¤. ì•¡ì…˜ì— ëŒ€í•´ì„œë§Œ ê´€ì‹¬(êµ¬í˜„)ì„ ê°€ì§‘ë‹ˆë‹¤.

---

## Invoker

- ì¸ë³´ì»¤ì—ëŠ” ëª…ë ¹ì´ ë“¤ì–´ ìˆìœ¼ë©°, execute() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ì»¤ë§¨ë“œ ê°ì²´ì—ì„œ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•´ ë‹¬ë¼ëŠ” ìš”êµ¬ë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤.
- Clientì˜ ìš”ì²­ì„ ë°›ì•„ ì‹¤ì œë¡œ Receiverì˜ ì•¡ì…˜ì„ í˜¸ì¶œí•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.
  - ClientëŠ” Invokerë¥¼ ê±°ì³ Receiverì—ê²Œ ìš”ì²­í•˜ê¸° ë•Œë¬¸ì—, Invokerì—ì„œ Receiverì— ë„ë‹¬í•˜ê¸° ì „, ìš”ì²­ì— ëŒ€í•œ ì´ëŸ°ì €ëŸ° ì„¤ì •ë“¤ì„ í•  ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.
  - ë°œë™ì ê°ì²´ëŠ” í•„ìš”ì— ë”°ë¼ ëª…ë ¹ ë°œë™ì— ëŒ€í•œ `ê¸°ë¡`ì„ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í•œ ë°œë™ì ê°ì²´ì— ë‹¤ìˆ˜ì˜ ì»¤ë§¨ë“œ ê°ì²´ê°€ ì „ë‹¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## Command

- ConcreteCommandì˜ ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
- ê³µí†µ ì¸í„°í˜ì´ìŠ¤ë¡œ ê°€ì§‘ë‹ˆë‹¤. ì´ ë©”ì†Œë“œì—ì„œëŠ” ë¦¬ì‹œë²„ì— íŠ¹ì • ì‘ì—…ì„ ì²˜ë¦¬í•˜ë¼ëŠ” ì§€ì‹œë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
  - execute()
  - undo()
  - redo()

---

## ConcreteCommand

- ì»¤ë§¨ë“œ ê°ì²´ëŠ” ìˆ˜ì‹ ì ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ìˆ˜ì‹ ìì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³ , ì´ì— ìˆ˜ì‹ ìëŠ” ìì‹ ì—ê²Œ ì •ì˜ëœ ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- ì»¤ë§¨ë“œ ê°ì²´ëŠ” ë³„ë„ë¡œ ë°œë™ì ê°ì²´ì— ì „ë‹¬ë˜ì–´ ëª…ë ¹ì„ ë°œë™í•˜ê²Œ í•©ë‹ˆë‹¤.
- íŠ¹ì • í–‰ë™ê³¼ ë¦¬ì‹œë²„ ì‚¬ì´ë¥¼ ì—°ê²°í•´ ì¤ë‹ˆë‹¤.
  - ì¸ë³´ì»¤ì—ì„œ execute() í˜¸ì¶œì„ í†µí•´ ìš”ì²­ì„ í•˜ë©´ ConcreteCommand ê°ì²´ì—ì„œ ë¦¬ì‹œë²„ì— ìˆëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ê·¸ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ì‹¤ì œ êµ¬ì²´ì ì¸ `ìš”ì²­ ë‚´ìš©`ì„ ë‹´ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
- ëˆ„ê°€(Receiver)ê°€ ë¬´ì—‡ì„ í•´ì•¼í•˜ëŠ”ì§€ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
  - execute ë©”ì†Œë“œ ì•ˆì˜ ë¡œì§

---

## NoCommand ê°ì²´

- NoCommand ê°ì²´ëŠ” ì¼ì¢…ì˜ ë„ ê°ì²´(null object)ì…ë‹ˆë‹¤. ë”±íˆ ë¦¬í„´í•  ê°ì²´ëŠ” ì—†ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ nullì„ ì²˜ë¦¬í•˜ì§€ ì•Šì•„ë„ ë˜ë„ë¡ í•˜ê³  ì‹¶ì„ ë•Œ ë„ ê°ì²´ë¥¼ í™œìš©í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.
- ë„ ê°ì²´ëŠ” ì—¬ëŸ¬ ë””ìì¸ íŒ¨í„´ì—ì„œ ìœ ìš©í•˜ê²Œ ì“°ì…ë‹ˆë‹¤. ë„ ê°ì²´ë¥¼ ì¼ì¢…ì˜ ë””ìì¸ íŒ¨í„´ìœ¼ë¡œ ë¶„ë¥˜í•˜ê¸°ë„ í•©ë‹ˆë‹¤.

---

## ìŠ¤íŠ¸ë ˆí‹°ì§€ íŒ¨í„´

- ì¶”ìƒí™” ìˆ˜ì¤€ì´ ë” ë§ì•„ì§„ ìŠ¤íŠ¸ë ˆí‹°ì§€ íŒ¨í„´ì²˜ëŸ¼ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì°¨ì´ê°€ ìˆë‹¤ë©´, ìŠ¤íŠ¸ë ˆí‹°ì§€ íŒ¨í„´ì€ ì „ëµì„ ì‹¤í–‰í•˜ëŠ” ê°ì²´ì™€ ì „ëµ ê°ì²´ì˜ ê´€ê³„ê°€ ì¤‘ìš”í•˜ë‹¤ë©´, ì»¤ë§¨ë“œ íŒ¨í„´ì€ ëª…ë ¹ì´ ê°ì²´í™”ë˜ì–´ ë‹¤ë£¨ì–´ì§€ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

---

## UML

![](./images/command.svg)

---

## Command interface

```ts
interface Command {
  execute: () => void;
}
```

---

## Invoker class

```ts
class Invoker {
  private theCommand: Command;
  // ìƒì„±ìì—ì„œ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ í•„ìš”í•œ ê¸°ëŠ¥ì„ ì¸ì§€ë¡œ ë°›ìŠµë‹ˆë‹¤.
  constructor(theCommand: Command) {
    this.setCommand(theCommand);
  }
  public setCommand(newCommand: Command) {
    this.theCommand = newCommand;
  }
  // ë²„íŠ¼ì´ ëˆŒë¦¬ë©´ ì£¼ì–´ì§„ Commandì˜ execute ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
  public pressed() {
    this.theCommand.execute();
  }
}
```

---

## Receiver class

```ts
// Receiver class
class Lamp {
  public turnOn() {
    console.log('Lamp On');
  }
}

class Alarm {
  public start() {
    console.log('Alarming');
  }
}
```

---

## ConcreteCommand

```ts
class LampOnCommand implements Command {
  // Receiver
  private theLamp: Lamp;
  constructor(theLamp: Lamp) {
    this.theLamp = theLamp;
  }
  // Command ì¸í„°í˜ì´ìŠ¤ì˜ execute ë©”ì„œë“œ
  public execute() {
    this.theLamp.turnOn();
  }
}
class AlarmStartCommand implements Command {
  // Receiver
  private theAlarm: Alarm;
  constructor(theAlarm: Alarm) {
    this.theAlarm = theAlarm;
  }
  // Command ì¸í„°í˜ì´ìŠ¤ì˜ execute ë©”ì„œë“œ
  public execute() {
    this.theAlarm.start();
  }
}
```

---

## Client

```ts
// Receiver
const lamp = new Lamp();
// ConcreteCommand
const lampOnCommand = new LampOnCommand(lamp);
// Receiver
const alarm = new Alarm();
// ConcreteCommand
const alarmStartCommand = new AlarmStartCommand(alarm);
// Invoker
const invoker1 = new Invoker(lampOnCommand); // ë¨í”„ ì¼œëŠ” Command ì„¤ì •
invoker1.pressed(); // ë¨í”„ ì¼œëŠ” ê¸°ëŠ¥ ìˆ˜í–‰
// Invoker
const invoker2 = new Invoker(alarmStartCommand); // ì•ŒëŒ ìš¸ë¦¬ëŠ” Command ì„¤ì •
invoker2.pressed(); // ì•ŒëŒ ìš¸ë¦¬ëŠ” ê¸°ëŠ¥ ìˆ˜í–‰
invoker2.setCommand(lampOnCommand); // ë‹¤ì‹œ ë¨í”„ ì¼œëŠ” Commandë¡œ ì„¤ì •
invoker2.pressed(); // ë¨í”„ ì¼œëŠ” ê¸°ëŠ¥ ìˆ˜í–‰
```

---

## ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ì»¤ë§¨ë“œ íŒ¨í„´

```ts
const add = (x, y) => x + y;
const sub = (x, y) => x - y;
const mul = (x, y) => x * y;
const div = (x, y) => x / y;

class Command {
  execute: (x, y) => number;
  undo: (x, y) => number;
  value: number;
  name: string;
  constructor(execute, undo, value, name) {
    this.execute = execute;
    this.undo = undo;
    this.value = value;
    this.name = name;
  }
}

class AddCommand {
  constructor(value) {
    return new Command(add, sub, value, 'Add');
  }
}

class SubCommand {
  constructor(value) {
    return new Command(sub, add, value, 'Sub');
  }
}

class MulCommand {
  constructor(value) {
    return new Command(mul, div, value, 'Mul');
  }
}

class DivCommand {
  constructor(value) {
    return new Command(div, mul, value, 'Div');
  }
}

class Calculator {
  current: number;
  commands: any[];
  constructor() {
    this.current = 0;
    this.commands = [];
  }
  action(command) {
    const name = command.name;
    return `${name.charAt(0).toUpperCase()}${name.slice(1)}`;
  }
  execute(command) {
    this.current = command.execute(this.current, command.value);
    this.commands.push(command);
    console.log(`${this.action(command)}: ${command.value}`);
  }
  undo() {
    const command = this.commands.pop();
    this.current = command.undo(this.current, command.value);
    console.log(`Undo ${this.action(command)}: ${command.value}`);
  }
  getCurrentValue() {
    return this.current;
  }
}

const calculator = new Calculator();

calculator.execute(new AddCommand(100));
calculator.execute(new SubCommand(24));
calculator.execute(new MulCommand(6));
calculator.execute(new DivCommand(2));

calculator.undo();
calculator.undo();

console.log(`Value: ${calculator.getCurrentValue()}`);

// Add: 100
// Sub: 24
// Mul: 6
// Div: 2
// Undo Div: 2
// Undo Mul: 6
// Value: 76
```

---

## í´ë˜ìŠ¤ê°€ ì—†ëŠ” ì»¤ë§¨ë“œ íŒ¨í„´

```javascript
const carManager = {
  requestInfo: function (model, id) {
    return `The information for ${model} with ID ${id} is foobar`;
  },
  buyVehicle: function (model, id) {
    return `You have successfully purchased Item ${id}, a model`;
  },
  arrangeViewing: function (model, id) {
    return `You have successfully booked a viewing of ${model} ( ${id} )`;
  },
};

carManager.execute = function (name) {
  return (
    carManager[name] &&
    carManager[name].apply(carManager, [].slice.call(arguments, 1))
  );
};

console.log(carManager.execute('buyVehicle', 'Ford Escort', '453543'));
console.log(carManager.execute('arrangeViewing', 'Ferrari', '14523'));
console.log(carManager.execute('requestInfo', 'Ford Mondeo', '54323'));
console.log(carManager.execute('requestInfo', 'Ford Escort', '34232'));
console.log(carManager.execute('buyVehicle', 'Ford Escort', '34232'));
```

---

## ì°¸ê³ 

- [[Design Pattern] ì»¤ë§¨ë“œ íŒ¨í„´ì´ë€](https://gmlwjd9405.github.io/2018/07/07/command-pattern.html)
- [ì»¤ë§¨ë“œ íŒ¨í„´ (Command Pattern)](https://johngrib.github.io/wiki/command-pattern/)
- [ì»¤ë§¨ë“œ íŒ¨í„´](https://ko.wikipedia.org/wiki/%EC%BB%A4%EB%A7%A8%EB%93%9C_%ED%8C%A8%ED%84%B4)
- [ğŸ™ˆ[ë””ìì¸íŒ¨í„´] ì»¤ë§¨ë“œ íŒ¨í„´ ( Command Pattern )ğŸµ](https://victorydntmd.tistory.com/295)
- [ì •ë¦¬ì •ë¦¬ì •ë¦¬](https://jusungpark.tistory.com/18)
- [[ë””ìì¸ íŒ¨í„´] ì»¤ë§¨ë“œ íŒ¨í„´ (Command Pattern)](https://gdtbgl93.tistory.com/23)
- [[á„ƒá…µá„Œá…¡á„‹á…µá†« á„‘á…¢á„á…¥á†« 16á„‘á…§á†«] í–‰ë™ íŒ¨í„´, ì»¤ë§¨ë“œ (Command)](https://dailyheumsi.tistory.com/217)
- [ì½”ë”ê°€ ì•„ë‹Œ ê°œë°œì!! Whyë¥¼ ê°€ì§€ì!](https://jeongupark-study-house.tistory.com/65)
